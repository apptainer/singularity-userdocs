

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Installation &mdash; Singularity container 2.6 documentation</title>




    <link rel="shortcut icon" href="_static/favicon.png"/>












  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Build a Container" href="build_a_container.html" />
    <link rel="prev" title="Introduction" href="introduction.html" />


  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">


  <div class="wy-grid-for-nav">


    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">



            <a href="index.html" class="icon icon-home"> Singularity container




            <img src="_static/logo.png" class="logo" alt="Logo"/>

          </a>




              <div class="version">
                2.6
              </div>




<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">






              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#before-you-begin">Before you begin</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-from-a-tag">Install from a tag</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-a-specific-release">Install a specific release</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-the-development-branch">Install the development branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#remove-an-old-version">Remove an old version</a></li>
<li class="toctree-l2"><a class="reference internal" href="#install-on-windows">Install on Windows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#singularity-vagrant-box">Singularity Vagrant Box</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#install-on-linux">Install on Linux</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation-from-source">Installation from Source</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#option-1-download-latest-stable-release">Option 1: Download latest stable release</a></li>
<li class="toctree-l4"><a class="reference internal" href="#option-2-download-the-latest-development-code">Option 2: Download the latest development code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#prefix-in-special-characters">Prefix in special characters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#updating">Updating</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#debian-ubuntu-package">Debian Ubuntu Package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#testing-first-with-docker">Testing first with Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-the-mirror-and-installing">Adding the Mirror and installing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#build-an-rpm-from-source">Build an RPM from source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-an-deb-from-source">Build an DEB from source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-on-your-cluster-resource">Install on your Cluster Resource</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#install-on-mac">Install on Mac</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#option-1-singularity-vagrant-box">Option 1: Singularity Vagrant Box</a></li>
<li class="toctree-l3"><a class="reference internal" href="#option-2-vagrant-box-from-scratch-more-advanced-alternative">Option 2: Vagrant Box from Scratch (more advanced alternative)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#requesting-an-installation">Requesting an Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-ask-for-singularity-on-my-local-resource">How do I ask for Singularity on my local resource?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#information-resources">Information Resources</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#background">Background</a></li>
<li class="toctree-l4"><a class="reference internal" href="#security">Security</a></li>
<li class="toctree-l4"><a class="reference internal" href="#presentations">Presentations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installation-request">Installation Request</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="build_a_container.html">Build a Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_environment.html">Build Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="container_recipes.html">Container Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="singularity_flow.html">Singularity Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="bind_paths_and_mounts.html">Bind Paths and Mounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent_overlays.html">Persistent Overlays</a></li>
<li class="toctree-l1"><a class="reference internal" href="running_services.html">Running Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="container_checks.html">Container Checks</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_and_metadata.html">Environment and Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="reproducible_scif_apps.html">Reproducible SCI-F Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="singularity_and_docker.html">Singularity and Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>



        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">


      <nav class="wy-nav-top" aria-label="top navigation">

          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Singularity container</a>

      </nav>


      <div class="wy-nav-content">

        <div class="rst-content style-external-links">

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">

      <li><a href="index.html">Docs</a> &raquo;</li>

      <li>Installation</li>


      <li class="wy-breadcrumbs-aside">



              <a href="https://github.com/sylabs/singularity-userdocs/blob/master/installation.rst" class="fa fa-github"> Edit on GitHub</a>



      </li>

  </ul>


  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <div class="section" id="installation">
<span id="id1"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p id="sec-installation">This document will guide you through the process of installing
Singularity from source with the version and location of your choice.</p>
<div class="section" id="before-you-begin">
<h2>Before you begin<a class="headerlink" href="#before-you-begin" title="Permalink to this headline">¶</a></h2>
<p>If you have an earlier version of Singularity installed, you should
remove it before executing the installation commands.</p>
<p>These instructions will build Singularity from source on your system.
So you will need to have some development tools installed. If you run
into missing dependencies, try installing them WITH <code class="docutils literal notranslate"><span class="pre">apt-get</span></code> or <code class="docutils literal notranslate"><span class="pre">yum/rpm</span></code> as shown below.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo apt-get update &amp;&amp; \

    sudo apt-get install \

    python \

    dh-autoreconf \

    build-essential \

    libarchive-dev
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo yum update &amp;&amp; \

    sudo yum groupinstall &#39;Development Tools&#39; &amp;&amp; \

    sudo yum install libarchive-devel
</pre></div>
</div>
</div>
<div class="section" id="install-from-a-tag">
<h2>Install from a tag<a class="headerlink" href="#install-from-a-tag" title="Permalink to this headline">¶</a></h2>
<p>The following commands will install a tagged version of the <a class="reference external" href="https://github.com/sylabs/singularity">GitHub
repo</a> to <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>.
This will work for pre 3.0 tags.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/sylabs/singularity.git

$ cd singularity

$ git fetch --all

$ git tag -l

$ git checkout [TAG]

$ ./autogen.sh

$ ./configure --prefix=/usr/local --sysconfdir=/etc

$ make

$ sudo make install
</pre></div>
</div>
<p>Singularity will be installed in the <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code> directory hierarchy by default.
And if you specify a custom directory with the <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> option, all of
Singularity’s binaries and the configuration file will be installed within that
directory. This last option can be useful if you want to install multiple versions
of Singularity, install Singularity on a shared system, or if you want to remove
Singularity easily after installing it.</p>
<p>If you omit the <code class="docutils literal notranslate"><span class="pre">--sysconfdir</span></code> option , the configuration file will be installed in <code class="docutils literal notranslate"><span class="pre">/usr/local/etc</span></code>.
If you omit the <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> option, Singularity will be installed in the <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code> directory
hierarchy by default. And if you specify a custom directory with the <code class="docutils literal notranslate"><span class="pre">--prefix</span></code>
option, all of Singularity’s binaries and the configuration file will be installed within that directory.</p>
</div>
<div class="section" id="install-a-specific-release">
<h2>Install a specific release<a class="headerlink" href="#install-a-specific-release" title="Permalink to this headline">¶</a></h2>
<p>The following commands will install a specific release from <a class="reference external" href="https://github.com/sylabs/singularity/releases">GitHub
releases</a> page to <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ VER=2.5.1

$ wget https://github.com/sylabs/singularity/releases/download/$VER/singularity-$VER.tar.gz

$ tar xvf singularity-$VER.tar.gz

$ cd singularity-$VER

$ ./configure --prefix=/usr/local --sysconfdir=/etc

$ make

$ sudo make install
</pre></div>
</div>
</div>
<div class="section" id="install-the-development-branch">
<h2>Install the development branch<a class="headerlink" href="#install-the-development-branch" title="Permalink to this headline">¶</a></h2>
<p>The primary development of Singularity now happens on the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.
Please see the <code class="docutils literal notranslate"><span class="pre">INSTALL.md</span></code> file in a copy of the repository.</p>
</div>
<div class="section" id="remove-an-old-version">
<h2>Remove an old version<a class="headerlink" href="#remove-an-old-version" title="Permalink to this headline">¶</a></h2>
<p>Let’s say that we installed Singularity to <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>. To remove it completely,
you need to hit all of the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo rm -rf /usr/local/libexec/singularity

$ sudo rm -rf /usr/local/etc/singularity

$ sudo rm -rf /usr/local/include/singularity

$ sudo rm -rf /usr/local/lib/singularity

$ sudo rm -rf /usr/local/var/lib/singularity/

$ sudo rm /usr/local/bin/singularity

$ sudo rm /usr/local/bin/run-singularity

$ sudo rm /usr/local/etc/bash_completion.d/singularity

$ sudo rm /usr/local/man/man1/singularity.1
</pre></div>
</div>
<p>If you modified the system configuration directory, remove the <code class="docutils literal notranslate"><span class="pre">singularity.conf</span></code> file
there as well.
If you installed Singularity in a custom directory, you need only
remove that directory to uninstall Singularity. For instance if you
installed singularity with the <code class="docutils literal notranslate"><span class="pre">--prefix=/some/temp/dir</span></code> option argument pair, you can remove
Singularity like so:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ sudo rm -rf /some/temp/dir
</pre></div>
</div>
<p>What should you do next? You can check out the <a class="reference internal" href="quick_start.html#quick-start"><span class="std std-ref">quickstart</span></a> guide, or learn how to
interact with your container via the <a class="reference internal" href="appendix.html#shell-command"><span class="std std-ref">shell</span></a> , <a class="reference internal" href="appendix.html#exec-command"><span class="std std-ref">exec</span></a> , or <a class="reference internal" href="appendix.html#run-command"><span class="std std-ref">run</span></a> commands. Or click <strong>next</strong>
below to continue reading.</p>
</div>
<div class="section" id="install-on-windows">
<h2>Install on Windows<a class="headerlink" href="#install-on-windows" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<p>First, install the following software:</p>
<ul class="simple">
<li>install <a class="reference external" href="https://git-for-windows.github.io/">Git for Windows</a></li>
<li>install <a class="reference external" href="https://www.virtualbox.org/wiki/Downloads">VirtualBox for Windows</a></li>
<li>install <a class="reference external" href="https://www.vagrantup.com/downloads.html">Vagrant for Windows</a></li>
<li>install <a class="reference external" href="http://vagrantmanager.com/downloads/">Vagrant Manager for Windows</a></li>
</ul>
</div>
<div class="section" id="singularity-vagrant-box">
<h3>Singularity Vagrant Box<a class="headerlink" href="#singularity-vagrant-box" title="Permalink to this headline">¶</a></h3>
<p>We are maintaining a set of Vagrant Boxes via <a class="reference external" href="https://www.vagrantup.com/">Vagrant Cloud</a>, one of <a class="reference external" href="https://www.hashicorp.com/#open-source-tools">Hashicorp</a> many tools that likely you’ve used and haven’t known it. The current stable version of Singularity is available here:</p>
<ul class="simple">
<li><a class="reference external" href="https://app.vagrantup.com/singularityware/boxes/singularity-2.4/versions/2.4">sylabs/singularity-2.4</a></li>
</ul>
<p>For other versions of Singularity see <a class="reference external" href="https://app.vagrantup.com/singularityware">our Vagrant Cloud repository</a></p>
<p>Run GitBash. The default home directory will be C:Usersyour_username</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkdir singularity-2.4

cd singularity-2.4
</pre></div>
</div>
<p>Note that if you had installed a previous version of the vm (and are using the same folder), you must destroy it first. In our example we create a new folder. To destroy a previous vm:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vagrant destroy
</pre></div>
</div>
<p>Then issue the following commands to bring up the Virtual Machine:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vagrant init singularityware/singularity-2.4

vagrant up

vagrant ssh
</pre></div>
</div>
<p>You are then ready to go with Singularity 2.4!</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vagrant@vagrant:~$ which singularity

/usr/local/bin/singularity

vagrant@vagrant:~$ singularity --version

2.4-dist


vagrant@vagrant:~$ sudo singularity build growl-llo-world.simg shub://vsoch/hello-world

Cache folder set to /root/.singularity/shub

Progress |===================================| 100.0%

Building from local image: /root/.singularity/shub/vsoch-hello-world-master.simg

Building Singularity image...

Singularity container built: growl-llo-world.simg

Cleaning up...

vagrant@vagrant:~$ ./growl-llo-world.simg

RaawwWWWWWRRRR!!
</pre></div>
</div>
<p>Note that when you do <code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">up</span></code> you can also select the provider, if you use vagrant for multiple providers. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vagrant up --provider virtualbox
</pre></div>
</div>
<p>although this isn’t entirely necessary if you only have it configured for virtualbox.</p>
</div>
</div>
<div class="section" id="install-on-linux">
<h2>Install on Linux<a class="headerlink" href="#install-on-linux" title="Permalink to this headline">¶</a></h2>
<div class="section" id="installation-from-source">
<h3>Installation from Source<a class="headerlink" href="#installation-from-source" title="Permalink to this headline">¶</a></h3>
<p>You can try the following two options:</p>
<div class="section" id="option-1-download-latest-stable-release">
<h4>Option 1: Download latest stable release<a class="headerlink" href="#option-1-download-latest-stable-release" title="Permalink to this headline">¶</a></h4>
<p>You can always download the latest tarball release from <a class="reference external" href="https://github.com/sylabs/singularity/releases">GitHub</a></p>
<p>For example, here is how to download version <code class="docutils literal notranslate"><span class="pre">2.5.2</span></code> and install:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>VERSION=2.5.2

wget https://github.com/sylabs/singularity/releases/download/$VERSION/singularity-$VERSION.tar.gz

tar xvf singularity-$VERSION.tar.gz

cd singularity-$VERSION

./configure --prefix=/usr/local

make

sudo make install
</pre></div>
</div>
<p>Note that when you configure, <code class="docutils literal notranslate"><span class="pre">squashfs-tools</span></code> is <strong>not</strong> required, however it is required for full functionality. You will see this message after the configuration:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mksquashfs from squash-tools is required for full functionality
</pre></div>
</div>
<p>If you choose not to install <code class="docutils literal notranslate"><span class="pre">squashfs-tools</span></code>, you will hit an error when you try a pull from Docker Hub, for example.</p>
</div>
<div class="section" id="option-2-download-the-latest-development-code">
<h4>Option 2: Download the latest development code<a class="headerlink" href="#option-2-download-the-latest-development-code" title="Permalink to this headline">¶</a></h4>
<p>To download the most recent development code, you should use Git and do the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/sylabs/singularity.git

cd singularity

./autogen.sh

./configure --prefix=/usr/local

make

sudo make install
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The ‘make install’ is required to be run as root to get a properly installed Singularity implementation. If you do not run it as root, you will only be able to launch Singularity as root due to permission limitations.</p>
</div>
</div>
<div class="section" id="prefix-in-special-characters">
<h4>Prefix in special characters<a class="headerlink" href="#prefix-in-special-characters" title="Permalink to this headline">¶</a></h4>
<p>If you build Singularity with a non-standard <code class="docutils literal notranslate"><span class="pre">--prefix</span></code> argument, please be sure to review the <a class="reference external" href="https://www.sylabs.io/guides/2.5.2/admin-guide/">admin guide</a> for details regarding the <code class="docutils literal notranslate"><span class="pre">--localstatedir</span></code> variable. This is especially important in environments utilizing shared filesystems.</p>
</div>
<div class="section" id="updating">
<h4>Updating<a class="headerlink" href="#updating" title="Permalink to this headline">¶</a></h4>
<p>To update your Singularity version, you might want to first delete the executables for the old version:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo rm -rf /usr/local/libexec/singularity
</pre></div>
</div>
<p>And then install using one of the methods above.</p>
</div>
</div>
<div class="section" id="debian-ubuntu-package">
<h3>Debian Ubuntu Package<a class="headerlink" href="#debian-ubuntu-package" title="Permalink to this headline">¶</a></h3>
<p>Singularity is available on Debian (and Ubuntu) systems starting with Debian stretch and the Ubuntu 16.10 yakkety releases.
The package is called <code class="docutils literal notranslate"><span class="pre">singularity-container</span></code>. For recent releases of singularity and backports for older Debian and Ubuntu releases,
we recommend that you use the <a class="reference external" href="http://neuro.debian.net/pkgs/singularity-container.html">NeuroDebian repository</a>.</p>
<div class="section" id="testing-first-with-docker">
<h4>Testing first with Docker<a class="headerlink" href="#testing-first-with-docker" title="Permalink to this headline">¶</a></h4>
<p>If you want a quick preview of the NeuroDebian mirror, you can do this most easily with the NeuroDebian Docker image (and if you don’t, skip to the next section). Obviously you should have <a class="reference external" href="https://docs.docker.com/engine/installation/linux/ubuntu/">Docker installed</a> before you do this.</p>
<p>First we run the <code class="docutils literal notranslate"><span class="pre">neurodebian</span></code> Docker image:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ docker run -it --rm neurodebian
</pre></div>
</div>
<p>Then we update the cache (very quietly), and look at the <code class="docutils literal notranslate"><span class="pre">singularity-container</span></code> policy provided:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ apt-get update -qqq

$ apt-cache policy singularity-container

singularity-container:

  Installed: (none)

  Candidate: 2.3-1~nd80+1

  Version table:

    2.3-1~nd80+1 0

      500 http://neuro.debian.net/debian/ jessie/main amd64 Packages
</pre></div>
</div>
<p>You can continue working in Docker, or go back to your host and install Singularity.</p>
</div>
<div class="section" id="adding-the-mirror-and-installing">
<h4>Adding the Mirror and installing<a class="headerlink" href="#adding-the-mirror-and-installing" title="Permalink to this headline">¶</a></h4>
<p>You should first enable the NeuroDebian repository following instructions on the <a class="reference external" href="http://neuro.debian.net/">NeuroDebian</a> site. This means using the dropdown menus to find the correct mirror for your operating system and location. For example, after selecting Ubuntu 16.04 and selecting a mirror in CA, I am instructed to add these lists:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo wget -O- http://neuro.debian.net/lists/xenial.us-ca.full | sudo tee /etc/apt/sources.list.d/neurodebian.sources.list

sudo apt-key adv --recv-keys --keyserver hkp://pool.sks-keyservers.net:80 0xA5D32F012649A5A9
</pre></div>
</div>
<p>and then update</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt-get update
</pre></div>
</div>
<p>then singularity can be installed as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt-get install -y singularity-container
</pre></div>
</div>
<p>During the above, if you have a previously installed configuration, you might be asked if you want to define a custom configuration/init, or just use the default provided by the package, eg:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Configuration file &#39;/etc/singularity/init&#39;

  ==&gt; File on system created by you or by a script.

  ==&gt; File also in package provided by package maintainer.

    What would you like to do about it ?  Your options are:

      Y or I  : install the package maintainer&#39;s version

      N or O  : keep your currently-installed version

        D     : show the differences between the versions

        Z     : start a shell to examine the situation

The default action is to keep your current version.

*** init (Y/I/N/O/D/Z) [default=N] ? Y


Configuration file &#39;/etc/singularity/singularity.conf&#39;

  ==&gt; File on system created by you or by a script.

  ==&gt; File also in package provided by package maintainer.

    What would you like to do about it ?  Your options are:

      Y or I  : install the package maintainer&#39;s version

      N or O  : keep your currently-installed version

        D     : show the differences between the versions

        Z     : start a shell to examine the situation

The default action is to keep your current version.

*** singularity.conf (Y/I/N/O/D/Z) [default=N] ? Y
</pre></div>
</div>
<p>And for a user, it’s probably well suited to use the defaults. For a cluster admin, we recommend that you read the <a class="reference external" href="https://www.sylabs.io/guides/2.5.2/admin-guide/">admin docs</a> to get a better understanding of the configuration file options available to you. Remember that you can always tweak the files at <code class="docutils literal notranslate"><span class="pre">/etc/singularity/singularity.conf</span></code> and <code class="docutils literal notranslate"><span class="pre">/etc/singularity/init</span></code> if you want to make changes.</p>
<p>After this install, you should confirm that <code class="docutils literal notranslate"><span class="pre">2.3-dist</span></code> is the version installed:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ singularity --version

  2.4-dist
</pre></div>
</div>
<p>Note that if you don’t add the NeuroDebian lists, the version provided will be old (e.g., 2.2.1). If you need a backport build of the recent release of Singularity on those or older releases of Debian and Ubuntu, you can <a class="reference external" href="http://neuro.debian.net/pkgs/singularity-container.html">see all the various builds and other information here</a>.</p>
</div>
</div>
<div class="section" id="build-an-rpm-from-source">
<h3>Build an RPM from source<a class="headerlink" href="#build-an-rpm-from-source" title="Permalink to this headline">¶</a></h3>
<p>Like the above, you can build an RPM of Singularity so it can be more easily managed, upgraded and removed. From the base Singularity source directory do the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./autogen.sh

./configure

make dist

rpmbuild -ta singularity-*.tar.gz

sudo yum install ~/rpmbuild/RPMS/*/singularity-[0-9]*.rpm
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to have the RPM install the files to an alternative location, you should define the environment variable ‘PREFIX’ to suit your needs, and use the following command to build:</p>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>PREFIX=/opt/singularity

rpmbuild -ta --define=&quot;_prefix $PREFIX&quot; --define &quot;_sysconfdir $PREFIX/etc&quot; --define &quot;_defaultdocdir $PREFIX/share&quot; singularity-*.tar.gz
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">autogen.sh</span></code> If you get an error that you have packages missing, for example on Ubuntu 16.04:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./autogen.sh

+libtoolize -c

./autogen.sh: 13: ./autogen.sh: libtoolize: not found

+aclocal

./autogen.sh: 14: ./autogen.sh: aclocal: not found

+autoheader

./autogen.sh: 15: ./autogen.sh: autoheader: not found

+autoconf

./autogen.sh: 16: ./autogen.sh: autoconf: not found

+automake -ca -Wno-portability

./autogen.sh: 17: ./autogen.sh: automake: not found
</pre></div>
</div>
<p>then you need to install dependencies:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sudo apt-get install -y build-essential libtool autotools-dev automake autoconf
</pre></div>
</div>
</div>
<div class="section" id="build-an-deb-from-source">
<h3>Build an DEB from source<a class="headerlink" href="#build-an-deb-from-source" title="Permalink to this headline">¶</a></h3>
<p>To build a deb package for Debian/Ubuntu/LinuxMint invoke the following commands:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ fakeroot dpkg-buildpackage -b -us -uc # sudo will ask for a password to run the tests

$ sudo dpkg -i ../singularity-container_2.3_amd64.deb
</pre></div>
</div>
<p>Note that the tests will fail if singularity is not already installed on your system. This is the case when you run this procedure for the first time. In that case run the following sequence:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo &quot;echo SKIPPING TESTS THEYRE BROKEN&quot; &gt; ./test.sh

$ fakeroot dpkg-buildpackage -nc -b -us -uc # this will continue the previous build without an initial &#39;make clean&#39;
</pre></div>
</div>
</div>
<div class="section" id="install-on-your-cluster-resource">
<h3>Install on your Cluster Resource<a class="headerlink" href="#install-on-your-cluster-resource" title="Permalink to this headline">¶</a></h3>
<p>In the case that you want Singularity installed on a shared resource, you will need to talk to the administrator of the resource. Toward this goal, we’ve prepared a <a class="reference internal" href="#installation-request"><span class="std std-ref">helpful guide</span></a> that you can send to him or her. If you have unanswered questions, please <a class="reference external" href="https://www.sylabs.io/contact/">reach out</a>..</p>
</div>
</div>
<div class="section" id="install-on-mac">
<h2>Install on Mac<a class="headerlink" href="#install-on-mac" title="Permalink to this headline">¶</a></h2>
<p>This recipe demonstrates how to run Singularity on your Mac via Vagrant and Ubuntu. The recipe requires access to <code class="docutils literal notranslate"><span class="pre">brew</span></code> which is a package installation subsystem for OS X. This recipe may take anywhere from 5-20 minutes to complete.</p>
<div class="section" id="id2">
<h3>Setup<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>First, install brew if you do not have it already.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
</pre></div>
</div>
<p>Next, install Vagrant and the necessary bits.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>brew cask install virtualbox

brew cask install vagrant

brew cask install vagrant-manager
</pre></div>
</div>
</div>
<div class="section" id="option-1-singularity-vagrant-box">
<h3>Option 1: Singularity Vagrant Box<a class="headerlink" href="#option-1-singularity-vagrant-box" title="Permalink to this headline">¶</a></h3>
<p>We are maintaining a set of Vagrant Boxes via <a class="reference external" href="https://www.vagrantup.com/">Vagrant Cloud</a>, one of <a class="reference external" href="https://www.hashicorp.com/#open-source-tools">Hashicorp</a> many tools that likely you’ve used and haven’t known it. The current stable version of Singularity is available here:</p>
<ul class="simple">
<li><a class="reference external" href="https://app.vagrantup.com/singularityware/boxes/singularity-2.4/versions/2.4">singularityware/singularity-2.4</a></li>
</ul>
<p>For other versions of Singularity see <a class="reference external" href="https://app.vagrantup.com/singularityware">our Vagrant Cloud repository</a>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkdir singularity-vm

cd singularity-vm
</pre></div>
</div>
<p>Note that if you have installed a previous version of the vm, you can either destroy it first, or create a new directory.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vagrant destroy
</pre></div>
</div>
<p>Then issue the following commands to bring up the Virtual Machine:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vagrant init singularityware/singularity-2.4

vagrant up

vagrant ssh
</pre></div>
</div>
<p>You are then ready to go with Singularity 2.4!</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vagrant@vagrant:~$ which singularity

/usr/local/bin/singularity

vagrant@vagrant:~$ singularity --version

2.4-dist


vagrant@vagrant:~$ sudo singularity build growl-llo-world.simg shub://vsoch/hello-world

Cache folder set to /root/.singularity/shub

Progress |===================================| 100.0%

Building from local image: /root/.singularity/shub/vsoch-hello-world-master.simg

Building Singularity image...

Singularity container built: growl-llo-world.simg

Cleaning up...

vagrant@vagrant:~$ ./growl-llo-world.simg

RaawwWWWWWRRRR!!
</pre></div>
</div>
<p>Note that when you do <code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">up</span></code> you can also select the provider, if you use vagrant for multiple providers. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vagrant up --provider virtualbox
</pre></div>
</div>
<p>although this isn’t entirely necessary if you only have it configured for virtualbox.</p>
</div>
<div class="section" id="option-2-vagrant-box-from-scratch-more-advanced-alternative">
<h3>Option 2: Vagrant Box from Scratch (more advanced alternative)<a class="headerlink" href="#option-2-vagrant-box-from-scratch-more-advanced-alternative" title="Permalink to this headline">¶</a></h3>
<p>If you want to get more familiar with how Vagrant and VirtualBox work, you can instead build your own Vagrant Box from scratch. In this case, we will use the Vagrantfile for <code class="docutils literal notranslate"><span class="pre">bento/ubuntu-16.04</span></code>, however you could also try any of the <a class="reference external" href="https://atlas.hashicorp.com/bento">other bento boxes</a> that are equally delicious. As before, you should first make a separate directory for your Vagrantfile, and then init a base image.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkdir singularity-2.4

cd singularity-2.4

vagrant init bento/ubuntu-16.04
</pre></div>
</div>
<p>Next, build and start the vagrant hosted VM, and you will install Singularity by sending the entire install script as a command (with the <code class="docutils literal notranslate"><span class="pre">-c</span></code> argument). You could just as easily shell into the box first with vagrant ssh, and then run these commands on your own. To each bento, his own.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vagrant up --provider virtualbox


# Run the necessary commands within the VM to install Singularity

vagrant ssh -c /bin/sh &lt;&lt;EOF

    sudo apt-get update

    sudo apt-get -y install build-essential curl git sudo man vim autoconf libtool

    git clone https://github.com/sylabs/singularity.git

    cd singularity

    ./autogen.sh

    ./configure --prefix=/usr/local

    make

    sudo make install

EOF
</pre></div>
</div>
<p>At this point, Singularity is installed in your Vagrant Ubuntu VM! Now you can use Singularity as you would normally by logging into the VM directly</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>vagrant ssh
</pre></div>
</div>
<p>Remember that the VM is running in the background because we started it via the command <code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">up</span></code>. You can shut the VM down using the command <code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">halt</span></code> when you no longer need it.</p>
</div>
</div>
<div class="section" id="requesting-an-installation">
<h2>Requesting an Installation<a class="headerlink" href="#requesting-an-installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-do-i-ask-for-singularity-on-my-local-resource">
<h3>How do I ask for Singularity on my local resource?<a class="headerlink" href="#how-do-i-ask-for-singularity-on-my-local-resource" title="Permalink to this headline">¶</a></h3>
<p>Installation of a new software is no small feat for a shared cluster resource. Whether you are an administrator reading this, or a user that wants a few talking points and background to share with your administrator, this document is for you. Here we provide you with some background and resources to learn about Singularity. We hope that this information will be useful to you in making the decision to build reproducible containers with Singularity</p>
</div>
<div class="section" id="information-resources">
<h3>Information Resources<a class="headerlink" href="#information-resources" title="Permalink to this headline">¶</a></h3>
<div class="section" id="background">
<h4>Background<a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Frequently Asked Questions is a good first place to start for quick question and answer format.</li>
<li>Singularity Publication: Reviews the history and rationale for development of the Software, along with comparison to other container software available at the time.</li>
<li>Documentation Background is useful to read about use cases, and goals of the Software.</li>
</ul>
</div>
<div class="section" id="security">
<h4>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Administrator Control: The configuration file template is the best source to learn about the configuration options that are under the administrator’s control.</li>
<li>Security Overview discusses common security concerns</li>
</ul>
</div>
<div class="section" id="presentations">
<h4>Presentations<a class="headerlink" href="#presentations" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Contributed Content is a good source of presentations, tutorials, and links.</li>
</ul>
</div>
</div>
<div class="section" id="installation-request">
<span id="id6"></span><h3>Installation Request<a class="headerlink" href="#installation-request" title="Permalink to this headline">¶</a></h3>
<p>Putting all of the above together, a request might look like the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Dear Research Computing,


We are interested in having an installation of the Singularity software (https://sylabs.github.io) installed on our cluster. Singularity containers will allow us to build encapsulated environments, meaning that our work is reproducible and we are empowered to choose all dependencies including libraries, operating system, and custom software. Singularity is already installed on over 50 centers internationally (http://singularity.lbl.gov/citation-registration) including TACC, NIH,

and several National Labs, Universities, Hospitals. Importantly, it has a vibrant team of developers, scientists, and HPC administrators that invest heavily in the security and development of the software, and are quick to respond to the needs of the community. To help learn more about Singularity, I thought these items might be of interest:


  - Security: A discussion of security concerns is discussed at https://www.sylabs.io/guides/2.5.2/user-guide/introduction.html#security-and-privilege-escalation

  - Installation: https://www.sylabs.io/guides/2.5.2/admin-guide/


If you have questions about any of the above, you can email the list (singularity@lbl.gov) or join the slack channel (singularity-container.slack.com) to get a human response. I can do my best to facilitate this interaction if help is needed. Thank you kindly for considering this request!

Best,

User
</pre></div>
</div>
<p>As is stated in the letter above, you can always <a class="reference external" href="https://www.sylabs.io/contact/">reach out</a> to us for additional questions or support.</p>
</div>
</div>
</div>


           </div>

          </div>
          <footer>

    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">

        <a href="build_a_container.html" class="btn btn-neutral float-right" title="Build a Container" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>


        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>

    </div>


  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Singularity.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>


<script type="text/javascript" src="_static/js/footer.js"></script>


    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.6',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>



  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>
